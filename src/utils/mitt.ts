/**
 * 事件总线系统
 * - 基于mitt库的轻量级事件发射器
 * - 用于组件间的松耦合通信
 * - 专门处理翻译卡片显示和隐藏的状态管理
 */
import mitt from 'mitt';

// ===================== 事件类型定义 =====================

/**
 * 扩展内部事件类型定义
 * 定义所有组件间通信的事件名称和参数类型
 */
type Events = {
  /**
   * 显示翻译卡片事件
   * @param text - 要翻译的文本内容
   * @param domRect - 触发显示的元素边界矩形（用于定位卡片位置）
   */
  showCard: {text:string, domRect:DOMRect};
  
  /**
   * 隐藏翻译卡片事件
   * 无参数，表示完全隐藏当前显示的翻译卡片
   */
  hideCard: void
};

// ===================== 事件发射器实例 =====================

/**
 * 全局事件发射器实例
 * 在整个扩展中共享使用，用于跨组件的事件传递
 * 支持以下事件：
 * - showCard: 显示翻译卡片
 * - hideCard: 隐藏翻译卡片
 */
export const emitter = mitt<Events>();
